window.enjoyhintcounter=0,window.EnjoyHint=function(a){var b,c=this;c.id=++window.enjoyhintcounter;var d={maxElementSearchAttempt:200,onStart:function(){},onEnd:function(){},onSkip:function(){},onNext:function(){}};this.options=$.extend(d,a),this.data=[],this.current_step=0,this.timerHandler=null,$body=$("body");var e=function(){$(".enjoyhint")&&$(".enjoyhint").remove(),$body.css({overflow:"hidden"}),$(document).on("touchmove",f),$body.enjoyhint({onNextClick:function(){c.nextStep()},onSkipClick:function(){c.options.onSkip(),c.skipAll()}})},f=function(a){a.preventDefault()};c.destroyEnjoy=function(){$body.removeClass("enjoyhint-disabled-ui"),c.stopElementMonitoring(),$(".enjoyhint").remove(),$body.css({overflow:"auto"}),$(document).off("touchmove",f),$(document).off(".enjoyhint")},c.clear=function(){var a=$(".enjoyhint_next_btn"),b=$(".enjoyhint_skip_btn");a.removeClass(c.nextUserClass),a.text("Next"),b.removeClass(c.skipUserClass),b.text("Skip")};var g=function(a){var b=$(a.selector);if(!b.length)return null;var c=Math.max(b.outerWidth()||Number(b.attr("width")),b.outerHeight()||Number(b.attr("height"))),d=a.radius||Math.round(c/2)+5,e=b.offset(),f=b.outerWidth()||Number(b.attr("width")),g=b.outerHeight()||Number(b.attr("height")),h=void 0!==a.margin?a.margin:10,i={x:e.left+Math.round(f/2),y:e.top+Math.round(g/2)-$(document).scrollTop()},j={enjoyHintElementSelector:a.selector,center_x:i.x,center_y:i.y,text:a.description,top:a.top,bottom:a.bottom,left:a.left,right:a.right,margin:a.margin,scroll:a.scroll};return a.skipArrow&&(j.skipArrow=a.skipArrow),a.disableUI&&(j.disableUI=a.disableUI),a.shape&&"circle"==a.shape?(j.shape="circle",j.radius=d):(j.radius=0,j.width=f+h,j.height=g+h),j},h=function(a,b){return a+(b?"custom":"")+".enjoy_hint"},i=function(a,b){$body.on(h(a,!0),b)},j=function(a){$body.off(h(a,!0))};c.stepAction=function(){if(console.log("step_index:",c.id+": "+c.current_step),$body.enjoyhint("setProgress",c.current_step+1,c.data.length),!c.data||!c.data[c.current_step])return $body.removeClass("enjoyhint-disabled-ui"),$body.enjoyhint("hide"),c.options.onEnd(),void c.destroyEnjoy();c.options.onNext();var a=$(".enjoyhint");a.removeClass("enjoyhint-step-"+c.current_step),a.removeClass("enjoyhint-step-"+(c.current_step+1)),a.addClass("enjoyhint-step-"+(c.current_step+1));var d=c.data[c.current_step];d.onBeforeStart&&"function"==typeof d.onBeforeStart&&d.onBeforeStart();var e=d.timeout||0;setTimeout(function(){c.clear()},250),setTimeout(function(){if(!d.selector)for(var a in d)d.hasOwnProperty(a)&&a.split(" ")[1]&&(d.selector=a.split(" ")[1],d.event=a.split(" ")[0],"next"!=a.split(" ")[0]&&"auto"!=a.split(" ")[0]&&"custom"!=a.split(" ")[0]||(d.event_type=a.split(" ")[0]),d.description=d[a]);$(document.body).scrollTo(d.selector,d.scrollAnimationSpeed||250,{offset:-100});var e=function(a,b,d){null!=c.elementSearchTimer&&(clearInterval(c.elementSearchTimer),c.elementSearchTimer=null),c.elementSearchTimer=setInterval(function(){var b=c.data[c.current_step],e=$(b.selector);if(--d<=0&&!e.length)return clearInterval(c.elementSearchTimer),void(console&&console.log&&console.log("element not found: "+b.selector));e.length&&e.is(":visible")?(e&&e.length&&e[0].scrollIntoView&&e[0].scrollIntoView(),clearInterval(c.elementSearchTimer),a()):console&&console.log&&console.log("searching for element: "+b.selector)},b)},f=function(){var a=c.data[c.current_step],d=$(a.selector).first(),e=h(a.event);if($body.enjoyhint("show"),$body.enjoyhint("hide_next"),b=d,a.event_selector&&(b=$(a.event_selector)),a.event_type||"key"!=a.event||d.keydown(function(b){b.which==a.keyCode&&(current_step++,stepAction())}),1==a.showNext&&$body.enjoyhint("show_next"),0==a.showSkip?$body.enjoyhint("hide_skip"):$body.enjoyhint("show_skip"),a.showSkip,a.nextButton){var f=$(".enjoyhint_next_btn");f.addClass(a.nextButton.className||""),f.text(a.nextButton.text||"Next"),c.nextUserClass=a.nextButton.className}if(a.skipButton){var k=$(".enjoyhint_skip_btn");k.addClass(a.skipButton.className||""),k.text(a.skipButton.text||"Skip"),c.skipUserClass=a.skipButton.className}if(a.event_type)switch(a.event_type){case"auto":switch(d[a.event](),a.event){case"click":}return c.current_step++,void c.stepAction();case"custom":i(a.event,function(b,d){a=c.data[c.current_step],void 0!=d&&d.constructor!==MouseEvent?a.event===d.event&&a.selector===d.selector&&(c.current_step++,console.log("step trigger:",c.current_step),j(a.event),c.stepAction()):void 0!=d&&d.constructor===MouseEvent&&$(a.selector)[0]===d.currentTarget&&(c.current_step++,console.log("step trigger:",c.current_step),j(a.event),c.stepAction())});break;case"next":$body.enjoyhint("show_next")}else $body.off("click.enjoyhint"),b.on(e,function(b){a=c.data[c.current_step],a.keyCode&&b.keyCode!=a.keyCode||this===$(a.selector)[0]&&(c.current_step++,$(this).off(e),c.stepAction())});var l=g(a);c.last_shape_data=l;var m=Math.round((c.current_step+1)/c.data.length*100)+"%";$body.enjoyhint("render_label_with_shape",l,c.stop,m)};c.current_step+1<c.data.length&&"next"===c.data[c.current_step+1].event?f():e(f,d.scrollAnimationSpeed+20||270,c.options.maxElementSearchAttempt)},e)},c.nextStep=function(){c.current_step++,c.stepAction()},c.skipAll=function(){var a=c.data[c.current_step];if(a&&a.selector){var b=$(a.selector);j(a.event),b.off(h(a.event))}c.destroyEnjoy()},window.addEventListener("resize.enjoyhint",function(){null!=b&&b.length&&$body.enjoyhint("redo_events_near_rect",b[0].getBoundingClientRect())}.bind(c)),c.stop=function(){c.skipAll()},c.reRunScript=function(a){c.current_step=a,c.stepAction()},c.monitorElementAnimations=function(){var a=this,c=a.current_step,d=a.data[c];if(d){var e=g(d);if(e&&a.last_shape_data&&(e.center_x!=a.last_shape_data.center_x||e.center_y!=a.last_shape_data.center_y)){a.last_shape_data=e;if($(d.selector)&&null!=b){var f=Math.round((c+1)/a.data.length*100)+"%";$body.enjoyhint("render_label_with_shape",e,a.stop,f)}}$(d.selector).offset().top>$(window).height()&&$(d.selector)[0].scrollIntoView()}},c.stopElementMonitoring=function(){window.clearInterval(c.timerHandler),c.timerHandler=null},c.init=e,c.runScript=function(){c.timerHandler&&stopElementMonitoring(),c.timerHandler=window.setInterval(c.monitorElementAnimations.bind(c),1e3),c.current_step=0,c.options.onStart.apply(c),c.stepAction()},c.resumeScript=function(){stepAction()},c.setCurrentStep=function(a){c.current_step=a},c.getCurrentStep=function(){return c.current_step},c.trigger=function(a){switch(a){case"next":c.nextStep();break;case"skip":c.skipAll()}},c.setScript=function(a){a&&(c.data=a)},c.set=function(a){c.setScript(a)},c.setSteps=function(a){c.setScript(a)},c.run=function(){c.runScript()},c.resume=function(){c.resumeScript()},e()},CanvasRenderingContext2D.prototype.roundRect=function(a,b,c,d,e){return c<2*e&&(e=c/2),d<2*e&&(e=d/2),this.beginPath(),this.moveTo(a+e,b),this.arcTo(a+c,b,a+c,b+d,e),this.arcTo(a+c,b+d,a,b+d,e),this.arcTo(a,b+d,a,b,e),this.arcTo(a,b,a+c,b,e),this.closePath(),this},function(a){var b,c,d,e,f,g,h,i,j,k,l,m=window.innerWidth,n=window.innerHeight,o={init:function(o){return this.each(function(){function p(a,b){var c=document.createElementNS("http://www.w3.org/2000/svg",a);for(var d in b)c.setAttribute(d,b[d]);return c}var q={onNextClick:function(){},onSkipClick:function(){},animation_time:800,showProgressPanel:!0};this.enjoyhint_obj={},b=this.enjoyhint_obj,b.resetComponentStuff=function(){c=null,d=null,e=null,f=null,g=null,h=null,i=null,j=null,k=null,l=null,m=window.innerWidth,n=window.innerHeight};var r=a(this);b.options=jQuery.extend(q,o),b.gcl={chooser:"enjoyhint"},b.cl={enjoy_hint:"enjoyhint",hide:"enjoyhint_hide",disable_events_element:"enjoyhint_disable_events",btn:"enjoyhint_btn",skip_btn:"enjoyhint_skip_btn",close_btn:"enjoyhint_close_btn",next_btn:"enjoyhint_next_btn",main_canvas:"enjoyhint_canvas",main_svg:"enjoyhint_svg",svg_wrapper:"enjoyhint_svg_wrapper",svg_transparent:"enjoyhint_svg_transparent",kinetic_container:"kinetic_container",progress_panel:"enjoyhint_progress"},b.canvas_size={w:1.4*a(window).width(),h:1.4*a(window).height()},b.enjoyhint=a("<div>",{class:b.cl.enjoy_hint+" "+b.cl.svg_transparent}).appendTo(r),b.enjoyhint_svg_wrapper=a("<div>",{class:b.cl.svg_wrapper+" "+b.cl.svg_transparent}).appendTo(b.enjoyhint),b.$stage_container=a('<div id="'+b.cl.kinetic_container+'">').appendTo(b.enjoyhint),b.$canvas=a('<canvas id="enj_canvas" width="'+b.canvas_size.w+'" height="'+b.canvas_size.h+'" class="'+b.cl.main_canvas+'">').appendTo(b.enjoyhint),b.$svg=a('<svg width="'+b.canvas_size.w+'" height="'+b.canvas_size.h+'" class="'+b.cl.main_canvas+" "+b.cl.main_svg+'">').appendTo(b.enjoyhint_svg_wrapper);var s=a(p("defs")),t=a(p("marker",{id:"arrowMarker",viewBox:"0 0 36 21",refX:"21",refY:"10",markerUnits:"strokeWidth",orient:"auto",markerWidth:"16",markerHeight:"12"})),u=a(p("path",{style:"fill:none; stroke:rgb(255,255,255); stroke-width:2",d:"M0,0 c30,11 30,9 0,20"}));s.append(t.append(u)).appendTo(b.$svg),b.kinetic_stage=new Kinetic.Stage({container:b.cl.kinetic_container,width:b.canvas_size.w,height:b.canvas_size.h,scaleX:1}),b.layer=new Kinetic.Layer,b.rect=new Kinetic.Rect({fill:"rgba(0,0,0,0.6)",width:b.canvas_size.w,height:b.canvas_size.h});var v=a("<div>",{class:b.cl.disable_events_element}).appendTo(b.enjoyhint),w=v.clone().appendTo(b.enjoyhint),x=v.clone().appendTo(b.enjoyhint),y=v.clone().appendTo(b.enjoyhint),z=function(a){a.stopImmediatePropagation()};if(b.$contents_container=a("<div/>",{class:b.cl.enjoy_hint+"-container"}).appendTo(b.enjoyhint).on("mousedown",function(c){function d(a,b,c){var d=a.split(" "),e=Number(d[0].split(",")[0].substr(1)),f=Number(d[0].split(",")[1]);return d[0]="M"+(e+b)+","+(f+c),d.join(" ")}var e=c.pageX,f=c.pageY,g=a("#enjoyhint_arrpw_line").attr("d"),h=b.$contents_container;this.classList.add("drag"),a("body").on("mousemove.enjoyhint",function(b){var c=b.pageY-f,i=b.pageX-e;a(h).css("transform","translate3d("+i+"px,"+c+"px,0px)"),g&&g.length&&a("#enjoyhint_arrpw_line").attr("d",d(g,i,c))}).on("mouseup.enjoyhint",function(b){var c=b.pageY-f,i=b.pageX-e;g&&g.length&&(g=d(g,i,c),a("#enjoyhint_arrpw_line").attr("d",g)),a(h).data("data-x",i).data("data-y",c),a(h).removeClass("drag"),a("body").off("mousemove.enjoyhint"),a("body").off("mouseup.enjoyhint")})}),a("button").focusout(z),v.click(z),w.click(z),x.click(z),y.click(z),b.$skip_btn=a("<div>",{class:b.cl.skip_btn}).appendTo(b.$contents_container).html("Skip").click(function(a){b.hide(),b.options.onSkipClick()}),b.$next_btn=a("<div>",{class:b.cl.next_btn}).appendTo(b.$contents_container).html("Next").click(function(a){b.options.onNextClick()}),b.$close_btn=a("<div>",{class:b.cl.close_btn}).appendTo(b.$contents_container).html("").click(function(a){b.hide(),b.options.onSkipClick()}),b.options.showProgressPanel){b.$progress_panel=a("<div>",{class:b.cl.progress_panel}).appendTo(b.enjoyhint).html("1/"+"1")}b.$canvas.mousedown(function(b){a("canvas").css({left:"4000px"});var c=document.elementFromPoint(b.clientX,b.clientY);return a("canvas").css({left:"0px"}),a(c).click(),!1});var A=0,B=130;b.shape=new Kinetic.Shape({radius:A,center_x:-B,center_y:-B,width:0,height:0,sceneFunc:function(a){var b=this.getContext("2d")._context,c=(this.pos,b.globalCompositeOperation);b.globalCompositeOperation="destination-out",b.beginPath();var d=this.attrs.center_x-Math.round(this.attrs.width/2),e=this.attrs.center_y-Math.round(this.attrs.height/2);b.roundRect(d,e,this.attrs.width,this.attrs.height,this.attrs.radius),b.fillStyle="red",b.fill(),b.globalCompositeOperation=c}}),b.shape.radius=A,b.layer.add(b.rect),b.layer.add(b.shape),b.kinetic_stage.add(b.layer),a(window).on("resize.enjoyhint",function(){if(!a(b.stepData.enjoyHintElementSelector).is(":visible"))return b.stopFunction(),void a(window).off("resize");if(a(".enjoyhint:visible").length){k=window.innerWidth,l=window.innerHeight;var o=a(b.stepData.enjoyHintElementSelector)[0].getBoundingClientRect();b.shape.attrs.center_x=Math.round(o.left+o.width/2),b.shape.attrs.center_y=Math.round(o.top+o.height/2),b.shape.attrs.width=o.width+11,b.shape.attrs.height=o.height+11;var q=window.innerWidth,r=window.innerHeight,s=q/m,t=r/n;if(b.kinetic_stage.setAttr("width",m*s),b.kinetic_stage.setAttr("height",n*t),null!=b.stepData){if(k=window.innerWidth,l=window.innerHeight,g||(g=b.shape.attrs.center_x,h=b.shape.attrs.center_y),!e){e=[];var u=a("#enjoyhint_arrpw_line").attr("d");u&&u.length&&(e.push(u.substr(1).split(",")[0]),e.push(u.substr(u.indexOf("Q")+1).split(",")[0]),e.push(u.split(" ")[2].split(",")[0]),f=[],f.push(u.split(",")[1].split(" ")[0]),f.push(u.split(",")[2].split(" ")[0]),f.push(u.split(",")[3]))}var v=a(".enjoy_hint_label");!c&&v&&v.length&&(c=v[0].getBoundingClientRect().left,d=v[0].getBoundingClientRect().top);var w=a(".enjoyhint_skip_btn");!i&&w&&w.length&&(i=w[0].getBoundingClientRect().left,j=w[0].getBoundingClientRect().top),v.css("left",window.innerWidth/2-v.outerWidth()/2);var x=v[0].getBoundingClientRect();if(window.innerWidth<640)a("#enjoyhint_arrpw_line").hide(),v.css("top",window.innerHeight/2-v.outerHeight()/2);else{a("#enjoyhint_arrpw_line").show(),v.css("top",d);var y,z,A,B,C=x.left+x.width/2<b.shape.attrs.center_x,D=x.top+x.height/2<b.shape.attrs.center_y;window.innerWidth<1200?(y=Math.round(x.left+(x.width/2+15)*(x.left+x.width/2<b.shape.attrs.center_x?1:-1)),A=Math.round(x.top+x.height*(x.top+x.height/2<b.shape.attrs.center_y?1:-1)),z=Math.round(b.shape.attrs.center_x+(b.shape.attrs.radius+15)*(C?-1:1)),B=Math.round(b.shape.attrs.center_y)):(y=Math.round(x.left+x.width/2+(x.width/2+15)*(C?1:-1)),A=Math.round(x.top+x.height/2),z=Math.round(b.shape.attrs.center_x),B=Math.round(b.shape.attrs.center_y+(b.shape.attrs.height/2+15)*(D?-1:1)));var E=y<z?z:y,F=A<B?A:B;Math.abs(x.left+x.width/2-b.shape.attrs.center_x)<200&&(y=z=x.left+x.width/2,A=x.top,E=y,F=A,console.log("ok")),window.innerWidth<900&&(E=y<z?y:z,F=A<B?B:A);var G=("M%d1,%d2 Q%d3,%d4 %d5,%d6".replace("%d1",y).replace("%d2",A).replace("%d3",E).replace("%d4",F).replace("%d5",z).replace("%d6",B),0),H=0;D?A>=B?(H=B,G=y):(H=A,G=z):A>=B?(H=A,G=z):(H=B,G=y),a("#enjoyhint_arrpw_line").remove();var I="M"+y+","+A+" Q"+G+","+H+" "+z+","+B;b.$svg.append(p("path",{style:"fill:none; stroke:rgb(255,255,255); stroke-width:3","marker-end":"url(#arrowMarker)",d:I,id:"enjoyhint_arrpw_line"})),b.enjoyhint.removeClass(b.cl.svg_transparent)}b.disableEventsNearRect(o);var J=+i+(b.shape.attrs.center_x-g)/2;w.css("left",J<15?15:J),w.css("top",x.top+x.height+20)}b.rect=new Kinetic.Rect({fill:"rgba(0,0,0,0.6)",width:window.innerWidth,height:window.innerHeight}),b.layer.removeChildren(),b.layer.add(b.rect),b.layer.add(b.shape),b.layer.draw(),b.kinetic_stage.draw()}});b.enjoyhint;return b.show=function(){b.enjoyhint.removeClass(b.cl.hide)},b.hide=function(){b.enjoyhint.addClass(b.cl.hide),new Kinetic.Tween({node:b.shape,duration:.002,center_x:-B,center_y:-B}).play()},b.hide(),b.hideNextBtn=function(){b.$next_btn.addClass(b.cl.hide),b.nextBtn="hide"},b.showNextBtn=function(){b.$next_btn.removeClass(b.cl.hide),b.nextBtn="show"},b.hideSkipBtn=function(){b.$skip_btn.addClass(b.cl.hide)},b.showSkipBtn=function(){b.$skip_btn.removeClass(b.cl.hide)},b.renderCircle=function(a){var c=a.r||0,d=a.x||0,e=a.y||0;new Kinetic.Tween({node:b.shape,duration:.2,center_x:d,center_y:e,width:2*c,height:2*c,radius:c}).play();var f=d-c,g=d+c,h=e-c,i=e+c,j=20;return{x:d,y:e,left:f,right:g,top:h,bottom:i,conn:{left:{x:f-j,y:e},right:{x:g+j,y:e},top:{x:d,y:h-j},bottom:{x:d,y:i+j}}}},b.renderRect=function(a,c){var d=a.r||5,e=a.x||0,f=a.y||0,g=a.w||0,h=a.h||0,i=20;new Kinetic.Tween({node:b.shape,duration:c,center_x:e,center_y:f,width:g,height:h,radius:d}).play();var j=Math.round(g/2),k=Math.round(h/2),l=e-j,m=e+j,n=f-k,o=f+k;return{x:e,y:f,left:l,right:m,top:n,bottom:o,conn:{left:{x:l-i,y:f},right:{x:m+i,y:f},top:{x:e,y:n-i},bottom:{x:e,y:o+i}}}},b.renderLabel=function(c){var d=c.x||0;b.originalElementX=d;var e=c.y||0,f=(c.text,b.getLabelElement({x:d,y:e,text:c.text,progress:c.progress})),g=f.width(),h=f.height(),i=f.offset().left,j=f.offset().left+g,k=f.offset().top-a(document).scrollTop(),l=f.offset().top+h,m=10,n={x:i-m,y:k+Math.round(h/2)},o={x:j+m,y:k+Math.round(h/2)},p={x:i+Math.round(g/2),y:k-m},q={x:i+Math.round(g/2),y:l+m};return f.detach(),setTimeout(function(){a("#enjoyhint_label").remove(),f.appendTo(b.$contents_container)},b.options.animation_time/2),{label:f,left:i,right:j,top:k,bottom:l,conn:{left:n,right:o,top:p,bottom:q}}},b.renderArrow=function(c){if(window.innerWidth>=640){var d=c.x_from||0,e=c.y_from||0,f=c.x_to||0,g=c.y_to||0,h=c.by_top_side,i=0,j=0;h?e>=g?(j=g,i=d):(j=e,i=f):e>=g?(j=e,i=f):(j=g,i=d)}c.text;b.enjoyhint.addClass(b.cl.svg_transparent),setTimeout(function(){a("#enjoyhint_arrpw_line").remove();var c="M"+d+","+e+" Q"+i+","+j+" "+f+","+g;b.$svg.append(p("path",{style:"fill:none; stroke:rgb(255,255,255); stroke-width:3","marker-end":"url(#arrowMarker)",d:c,id:"enjoyhint_arrpw_line"})),b.enjoyhint.removeClass(b.cl.svg_transparent)},b.options.animation_time/2)},b.getLabelElement=function(c){return a("<div>",{class:"enjoy_hint_label",id:"enjoyhint_label",unselectable:"on"}).css({top:c.y+"px",left:c.x+"px"}).html(c.text).appendTo(b.$contents_container)},b.disableEventsNearRect=function(a){v.css({top:"0",left:"0"}).height(a.top+5),w.css({top:a.bottom-5+"px",left:"0"}),x.css({top:"0",left:"0px"}).width(a.left),y.css({top:"0",left:a.right+"px"})},function(a){a.event.special.destroyed={remove:function(a){a.handler&&a.handler()}}}(jQuery),b.renderLabelWithShape=function(c,d){function e(b){return"MD-DIALOG"===b.tagName?b:void 0===b.tagName?null:e(a(b).parent()[0])}function f(a,b,c){I=a,J=b,H=c}function g(a,b,c,d,e){var g=[];(g=M?a:P?b:O?c:Q?d:e)&&f(g[0],g[1],g[2])}b.stepData=c;var h=e(a(b.stepData.enjoyHintElementSelector)[0]);null!=h&&a(h).on("dialogClosing",function(){b.stopFunction()}),b.resetComponentStuff();var i=c.shape||"rect",j={},k=0,l=0,m={top:c.top||0,bottom:c.bottom||0,left:c.left||0,right:c.right||0};switch(i){case"circle":k=l=c.radius;var n={top:c.center_y-l+m.top,bottom:c.center_y+l-m.bottom,left:c.center_x-k+m.left,right:c.center_x+k-m.right},o=n.right-n.left,p=n.bottom-n.top;c.radius=Math.round(Math.min(o,p)/2),k=l=Math.round(c.radius/2);var q=Math.round(o/2),r=Math.round(p/2);c.center_x=n.left+q,c.center_y=n.top+r,j=b.renderCircle({x:c.center_x,y:c.center_y,r:c.radius});break;case"rect":k=Math.round(c.width/2),l=Math.round(c.height/2);var n={top:c.center_y-l+m.top,bottom:c.center_y+l-m.bottom,left:c.center_x-k+m.left,right:c.center_x+k-m.right};c.width=n.right-n.left,c.height=n.bottom-n.top,k=Math.round(c.width/2),l=Math.round(c.height/2),c.center_x=n.left+k,c.center_y=n.top+l,j=b.renderRect({x:c.center_x,y:c.center_y,w:c.width,h:c.height,r:c.radius},.2)}var s={w:b.enjoyhint.width(),h:b.enjoyhint.height()},t=b.getLabelElement({x:0,y:0,text:c.text,progress:d}),u=t.outerWidth(),v=t.outerHeight();t.remove();var w=c.center_y-l,x=s.h-(c.center_y+l),y=(c.center_x,s.w,c.center_x,s.w,c.center_x,c.center_x,s.h-c.center_y<c.center_y?"top":"bottom"),z=150,A=40,B=z+v+A,C=l+z,D="top"==y?c.center_y-C-v:c.center_y+C,E=window.innerWidth/2-u/2;w<B&&x<B&&(D=c.center_y+A),window.innerWidth;var F=b.renderLabel({x:E,y:D,text:c.text,progress:d});b.$next_btn.css({left:E,top:D+v+20});var G=E+b.$next_btn.width()+10;"hide"==b.nextBtn&&(G=E),b.$skip_btn.css({left:G,top:D+v+20}),b.$close_btn.css({left:E,top:D-50}),b.disableEventsNearRect({top:j.top,bottom:j.bottom,left:j.left,right:j.right});var H=!1,I="left",J="left",K=F.left<=j.x&&F.right>=j.x,L=F.right<j.x,M=(F.left,j.x,F.right,j.left,F.left,j.right,F.bottom<j.top),N=F.top>j.bottom,O=F.bottom>=j.y&&F.top<=j.y,P=F.bottom<=j.y&&!M,Q=F.top>=j.y&&!N;if(K)if(M)f("bottom","top","top");else{if(!N)return void a("#enjoyhint_arrpw_line").remove();f("top","bottom","bottom")}else L?g(["right","top","top"],["bottom","left","bottom"],["right","left","top"],["top","left","top"],["right","bottom","bottom"]):g(["left","top","top"],["bottom","right","bottom"],["left","right","top"],["top","right","top"],["left","bottom","bottom"]);var R=F.conn[I],S=j.conn[J],T="top"==H;c.skipArrow?a("#enjoyhint_arrpw_line").remove():b.renderArrow({x_from:R.x,y_from:R.y,x_to:window.innerWidth<640?j.left+(j.left>0):S.x,y_to:window.innerWidth<640?j.conn.left.y:S.y,by_top_side:T})},b.clear=function(){b.ctx.clearRect(0,0,3e3,2e3)},this})},setProgress:function(c,d){if(b.$progress_panel){var e=function(a){var b=parseFloat(a),c="http://www.w3.org/2000/svg",d=document.createElementNS(c,"svg"),e=document.createElementNS(c,"circle");e.setAttribute("r",15),e.setAttribute("cx",20),e.setAttribute("cy",20),e.setAttribute("fill","transparent"),e.setAttribute("stroke-linecap","butt"),e.setAttribute("stroke-width","2pt"),e.setAttribute("stroke","black");var f=document.createElementNS(c,"circle");return f.setAttribute("r",15),f.setAttribute("cx",20),f.setAttribute("cy",20),f.setAttribute("fill","transparent"),f.setAttribute("stroke-linecap","butt"),f.setAttribute("stroke-width","2pt"),f.setAttribute("stroke","white"),f.setAttribute("stroke-dasharray",b+" 100"),d.setAttribute("viewBox","0 0 40 40"),d.setAttribute("style","transform: rotate(270deg);"),d.appendChild(e),d.appendChild(f),d};a(b.$progress_panel).html(e(c/d*100))}},set:function(a){return this.each(function(){this.enjoyhint_obj.setValue(a)}),this},show:function(){return this.each(function(){this.enjoyhint_obj.show()}),this},hide:function(){return this.each(function(){this.enjoyhint_obj.hide()}),this},hide_next:function(){return this.each(function(){this.enjoyhint_obj.hideNextBtn()}),this},show_next:function(){return this.each(function(){this.enjoyhint_obj.showNextBtn()}),this},hide_skip:function(){return this.each(function(){this.enjoyhint_obj.hideSkipBtn()}),this},show_skip:function(){return this.each(function(){this.enjoyhint_obj.showSkipBtn()}),this},render_circle:function(a,b,c){return this.each(function(){this.enjoyhint_obj.renderCircle(a,b,c)}),this},render_label:function(a,b,c){return this.each(function(){this.enjoyhint_obj.renderLabel(a,b,c)}),this},render_label_with_shape:function(a,c,d){return this.each(function(){b.stopFunction=c,this.enjoyhint_obj.renderLabelWithShape(a,d)}),this},redo_events_near_rect:function(a){b.disableEventsNearRect({top:a.top,bottom:a.bottom,left:a.left,right:a.right})},clear:function(){return this.each(function(){this.enjoyhint_obj.clear()}),this},close:function(a){return this.each(function(){this.enjoyhint_obj.closePopdown()}),this}};a.fn.enjoyhint=function(b){return o[b]?o[b].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof b&&b?(a.error("Method "+b+" does not exist on $.numinput"),this):o.init.apply(this,arguments)}}(window.jQuery);